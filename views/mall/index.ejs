

<h1>Malls Directory </h1>
<hr>


<% if (true){ %>

    
<div class="row">
    <% malls.forEach(function(mall) {%>
        <div class="col-sm-4">
            <div class="card mx-auto mt-3">
                <img src="<%=mall.thumbnail%>" class="card-img-top" alt="#">
                <div class="card-body">
                    <h5 class="card-title"><%=mall.nameOfMall%></h5>
                    <p class="card-text"><%=mall.aboutOfMall%></p>
                    
                    <br>
                    
                    <a href="/mall/detail?id=<%=mall._id%>" class="btn btn-primary">View Mall</a>
                
                </div>
                <div class="card-footer">
                    <small class="text-muted"><%=mall.rating%> stars</small>
                    <% for(let i = 1; i <= 5; i++) {%>
                        <% if(i <= mall.rating) { %>
                            <i class="bi bi-star-fill"></i>
                        <%} else{%>
                            <i class="bi bi-star"></i>
                        <%}%>
                    <%}%>
                </div>
            </div>
        </div>
    <%})%>
</div>


<br>
<%if(user && user.isAdmin == true) {%>

<div class=" table-responsive-sm">
<table class="table table-bordered table-hover">
    <caption>List of Malls (admin view Only)</caption>
    <thead>
    <tr class="table-dark">
        <th scope="col text-center">#</th>
        <th scope="col" class="text-center">Mall</th>
        <th scope="col" class="text-center">Rating</th>
        <th scope="col" class="text-center"> Location</th>
        <th scope="col" class="text-center">Opening Hours</th>
        <th scope="col" class="text-center">Contact</th>
        <th scope="col" class="text-center">Created At</th>
        <th scope="col"  class="text-center">Edit Mall</th>
        <th scope="col" class="text-center">Delete Mall</th>
        
    </tr> 
</thead>

    <% malls.forEach(function (mall,index) { %> 
    <tbody>
    <tr>
        <th scope="row"><%= index + 1 %></th>
        <td class="text-center">
           <a href="/mall/detail?id=<%= mall._id %>">
           <%= mall.nameOfMall %></a>
        </td>
       
        
        <td class="text-center"> <%= mall.rating %> </td>
        <td class="text-center"> <%= mall.location %> </td>
        <td class="text-center"> <%= mall.openingHour%> </td>
        <td class="text-center"> <%= mall.PhoneNumber%> </td>
        <td class="text-center"> <%= mall.createdAt %> </td>
    
        
        <td><a href="/mall/edit?id=<%= mall._id%>">Edit Mall</a></td>
        <td><a href="/mall/delete?id=<%= mall._id%>">Delete Mall</a></td>
    </tr>
</tbody>
        <%});%>
    <tbody></tbody>    
</table>
<%}%>
</div>

<% }else if (user) { %>


<div class="row">
    <% malls.forEach(function(mall) {%>
        <div class="col-sm-4">
            <div class="card mx-auto mt-3">
                <img src="#" class="card-img-top" alt="#">
                <div class="card-body">
                    <h5 class="card-title"><%=mall.nameOfMall%></h5>
                    <p class="card-text"><%=mall.aboutOfMall%></p>
                    
                    <br>
                    
                    <a href="/mall/detail?id=<%=mall._id%>" class="btn btn-primary">View Mall</a>
                
                </div>
                <div class="card-footer">
                    <small class="text-muted"><%=mall.rating%> stars</small>
                    <% for(let i = 1; i <= 5; i++) {%>
                        <% if(i <= mall.rating) { %>
                            <i class="bi bi-star-fill"></i>
                        <%} else{%>
                            <i class="bi bi-star"></i>
                        <%}%>
                    <%}%>
                </div>
            </div>
        </div>
    <%})%>
</div>

<% }else { %>
    <div class="row">
        <% malls.forEach(function(mall) {%>
            <div class="col-sm-3">
                <div class="card mx-auto mt-3 custom-card ">
                    <img src="#" class="card-img-top" alt="#">
                    <div class="card-body">
                        <h5 class="card-title"><%=mall.nameOfMall%></h5>
                        <p class="card-text"><%=mall.aboutOfMall%></p>
                        
                        <br>
                        
                        <a href="/mall/detail?id=<%=mall._id%>" class="btn btn-primary">View Mall</a>
                    
                    </div>
                    <div class="card-footer">
                        <small class="text-muted"><%=mall.rating%> stars</small>
                        <% for(let i = 1; i <= 5; i++) {%>
                            <% if(i <= mall.rating) { %>
                                <i class="bi bi-star-fill"></i>
                            <%} else{%>
                                <i class="bi bi-star"></i>
                            <%}%>
                        
                        <%}%>
                        
                    </div>
                </div>
            </div>
        <%})%>
        
    </div>
 
<% } %>
